{
    "scopeName": "source.firrtl",
    "fileTypes": [
        "fir"
    ],
    "name": "FIRRTL",
    "patterns": [
        {
            "include": "#version"
        },
        {
            "include": "#circuit"
        },
        {
            "include": "#annotations"
        },
        {
            "include": "#declaration"
        },
        {
            "include": "#statement"
        },
        {
            "include": "#comment"
        },
        {
            "include": "#file_info"
        }
    ],
    "repository": {
        "version": {
            "match": "FIRRTL\\s+version\\s+\\d+\\.\\d+\\.\\d+",
            "name": "comment.line.character.firrtl"
        },
        "circuit": {
            "match": "^(circuit)\\s+(\\w+|`[\\w]+`)\\s*:",
            "captures": {
                "1": {
                    "name": "storage.type.class.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            }
        },
        "annotations": {
            "begin": "%\\[",
            "end": "\\]",
            "name": "meta.annotation.firrtl",
            "patterns": [
                {
                    "include": "#comment"
                }
            ]
        },
        "declaration": {
            "patterns": [
                {
                    "include": "#formal"
                },
                {
                    "include": "#module"
                },
                {
                    "include": "#extmodule"
                },
                {
                    "include": "#layer"
                },
                {
                    "include": "#type_decl"
                },
                {
                    "include": "#port"
                },
                {
                    "include": "#wire_or_register"
                },
                {
                    "include": "#node"
                },
                {
                    "include": "#instance"
                },
                {
                    "include": "#memory"
                }
            ]
        },
        "formal": {
            "match": "^\\s*(formal)\\s+(\\w+|`[\\w]+`)\\s+(of)\\s+(\\w+|`[\\w]+`)\\s*:",
            "captures": {
                "1": {
                    "name": "storage.type.class.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                },
                "3": {
                    "name": "keyword.other.firrtl"
                },
                "4": {
                    "name": "entity.name.type.firrtl"
                }
            }
        },
        "module": {
            "begin": "^\\s*(public\\s+)?(module)\\s+(\\w+|`[\\w]+`)",
            "end": ":",
            "beginCaptures": {
                "1": {
                    "name": "storage.modifier.firrtl"
                },
                "2": {
                    "name": "storage.type.class.firrtl"
                },
                "3": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "match": "\\b(enablelayer)\\s+([\\w.]+)",
                    "captures": {
                        "1": {
                            "name": "keyword.control.firrtl"
                        },
                        "2": {
                            "name": "entity.name.class.firrtl"
                        }
                    }
                }
            ]
        },
        "extmodule": {
            "begin": "^\\s*(extmodule)\\s+(\\w+|`[\\w]+`)",
            "end": ":",
            "beginCaptures": {
                "1": {
                    "name": "storage.type.class.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "match": "\\b(enablelayer)\\s+([\\w.]+)",
                    "captures": {
                        "1": {
                            "name": "keyword.control.firrtl"
                        },
                        "2": {
                            "name": "entity.name.class.firrtl"
                        }
                    }
                },
                {
                    "match": "\\b(knownlayer)\\s+([\\w.]+(?:\\s*,\\s*[\\w.]+)*)",
                    "captures": {
                        "1": {
                            "name": "keyword.control.firrtl"
                        },
                        "2": {
                            "name": "entity.name.class.firrtl"
                        }
                    }
                }
            ]
        },
        "layer": {
            "match": "^\\s*(layer)\\s+(\\w+|`[\\w]+`)\\s*,\\s*(bind|inline)\\s*:",
            "captures": {
                "1": {
                    "name": "keyword.declaration.firrtl"
                },
                "2": {
                    "name": "entity.name.class.firrtl"
                },
                "3": {
                    "name": "storage.modifier.firrtl"
                }
            }
        },
        "type_decl": {
            "begin": "^\\s*(type)\\s+(\\w+|`[\\w]+`)\\s*=",
            "end": "$",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#type"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#file_info"
                }
            ]
        },
        "port": {
            "begin": "^\\s*(input|output)\\s+(\\w+|`[\\w]+`)\\s*:",
            "end": "$",
            "beginCaptures": {
                "1": {
                    "name": "storage.type.port.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#type"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#file_info"
                }
            ]
        },
        "type": {
            "patterns": [
                {
                    "include": "#type_property"
                },
                {
                    "include": "#type_probe"
                },
                {
                    "include": "#type_enum"
                },
                {
                    "include": "#type_bundle"
                },
                {
                    "include": "#type_ground_nowidth"
                },
                {
                    "include": "#type_ground_width"
                },
                {
                    "include": "#type_alias_ref"
                }
            ]
        },
        "type_alias_ref": {
            "match": "\\b(\\w+|`[\\w]+`)\\b",
            "name": "entity.name.type.firrtl"
        },
        "type_ground_nowidth": {
            "match": "(const\\s+)?(Clock|Reset|AsyncReset)(?:\\[(\\d+)\\])?",
            "captures": {
                "1": {
                    "name": "storage.modifier.firrtl"
                },
                "2": {
                    "name": "storage.type.firrtl"
                },
                "3": {
                    "name": "constant.numeric.firrtl"
                }
            }
        },
        "type_ground_width": {
            "match": "(const\\s+)?([US]Int|Analog)(?:<(\\d+)>)?(?:\\[(\\d+)\\])?",
            "captures": {
                "1": {
                    "name": "storage.modifier.firrtl"
                },
                "2": {
                    "name": "storage.type.firrtl"
                },
                "3": {
                    "name": "constant.numeric.firrtl"
                },
                "4": {
                    "name": "constant.numeric.firrtl"
                }
            }
        },
        "type_bundle": {
            "begin": "(const\\s+)?\\{(?!\\|)",
            "end": "\\}",
            "beginCaptures": {
                "1": {
                    "name": "storage.modifier.firrtl"
                }
            },
            "name": "meta.type.bundle.firrtl",
            "patterns": [
                {
                    "include": "#type_bundle_field"
                },
                {
                    "include": "#type"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "type_bundle_field": {
            "match": "(flip\\s+)?(\\w+|`[\\w]+`)\\s*:",
            "captures": {
                "1": {
                    "name": "storage.modifier.firrtl"
                },
                "2": {
                    "name": "variable.other.firrtl"
                }
            }
        },
        "type_probe": {
            "begin": "((RW)?Probe)\\s*<",
            "end": ">",
            "beginCaptures": {
                "1": {
                    "name": "storage.type.firrtl"
                }
            },
            "patterns": [
                {
                    "match": ",\\s*([\\w.]+)",
                    "captures": {
                        "1": {
                            "name": "entity.name.type.firrtl"
                        }
                    }
                },
                {
                    "include": "#type"
                }
            ]
        },
        "type_enum": {
            "begin": "\\{\\|",
            "end": "\\|\\}",
            "name": "meta.type.enum.firrtl",
            "patterns": [
                {
                    "include": "#type_enum_variant"
                },
                {
                    "include": "#type"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "type_enum_variant": {
            "match": "(\\w+|`[\\w]+`)\\s*(:)?",
            "captures": {
                "1": {
                    "name": "variable.other.firrtl"
                },
                "2": {
                    "name": "punctuation.separator.firrtl"
                }
            }
        },
        "type_property": {
            "patterns": [
                {
                    "match": "\\b(Integer)\\b",
                    "name": "storage.type.firrtl"
                },
                {
                    "begin": "\\b(List)\\s*<",
                    "end": ">",
                    "beginCaptures": {
                        "1": {
                            "name": "storage.type.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#type_property"
                        }
                    ]
                }
            ]
        },
        "wire_or_register": {
            "begin": "^\\s*(wire|reg|regreset)\\s+(\\w+|`[\\w]+`)\\s*:",
            "end": "$",
            "beginCaptures": {
                "1": {
                    "name": "storage.type.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#type"
                },
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#file_info"
                }
            ]
        },
        "node": {
            "begin": "^\\s*(node)\\s+(\\w+|`[\\w]+`)\\s*=",
            "end": "$",
            "beginCaptures": {
                "1": {
                    "name": "storage.type.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#file_info"
                }
            ]
        },
        "instance": {
            "match": "^\\s*(inst)\\s+(\\w+|`[\\w]+`)\\s+(of)\\s+(\\w+|`[\\w]+`)",
            "captures": {
                "1": {
                    "name": "keyword.other.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                },
                "3": {
                    "name": "keyword.other.firrtl"
                },
                "4": {
                    "name": "entity.name.type.firrtl"
                }
            }
        },
        "memory": {
            "match": "^\\s*(mem)\\s+(\\w+|`[\\w]+`)\\s*:",
            "captures": {
                "1": {
                    "name": "storage.type.class.firrtl"
                },
                "2": {
                    "name": "entity.name.type.firrtl"
                }
            }
        },
        "statement": {
            "patterns": [
                {
                    "include": "#statement_when"
                },
                {
                    "include": "#statement_else"
                },
                {
                    "include": "#statement_match"
                },
                {
                    "include": "#statement_match_case"
                },
                {
                    "include": "#statement_printf"
                },
                {
                    "include": "#statement_fprintf"
                },
                {
                    "include": "#statement_fflush"
                },
                {
                    "include": "#statement_verification"
                },
                {
                    "include": "#statement_stop"
                },
                {
                    "include": "#statement_force"
                },
                {
                    "include": "#statement_layerblock"
                },
                {
                    "include": "#statement_intrinsic"
                },
                {
                    "include": "#statement_connectlike"
                },
                {
                    "include": "#statement_memory_config"
                },
                {
                    "include": "#statement_extmodule_config"
                },
                {
                    "include": "#statement_skip"
                }
            ]
        },
        "statement_when": {
            "begin": "^\\s*(when)\\s+",
            "end": "$",
            "beginCaptures": {
                "1": {
                    "name": "keyword.control.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#file_info"
                }
            ]
        },
        "statement_else": {
            "patterns": [
                {
                    "begin": "^\\s*(else)\\s+(when)\\s+",
                    "end": "$",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.control.firrtl"
                        },
                        "2": {
                            "name": "keyword.control.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#expression"
                        },
                        {
                            "include": "#comment"
                        },
                        {
                            "include": "#file_info"
                        }
                    ]
                },
                {
                    "match": "^\\s*(else)\\s*:",
                    "captures": {
                        "1": {
                            "name": "keyword.control.firrtl"
                        }
                    }
                }
            ]
        },
        "statement_match": {
            "begin": "^\\s*(match)\\s+",
            "end": "$",
            "beginCaptures": {
                "1": {
                    "name": "keyword.control.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                },
                {
                    "include": "#file_info"
                }
            ]
        },
        "statement_match_case": {
            "match": "^\\s*(\\w+|`[\\w]+`)(?:\\s*\\(\\s*(\\w+|`[\\w]+`)\\s*\\))?\\s*:",
            "captures": {
                "1": {
                    "name": "variable.other.firrtl"
                },
                "2": {
                    "name": "variable.parameter.firrtl"
                }
            }
        },
        "statement_connectlike": {
            "patterns": [
                {
                    "begin": "^\\s*(connect|invalidate|propassign)\\s+",
                    "end": "$",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#expression"
                        },
                        {
                            "include": "#property_expression"
                        },
                        {
                            "include": "#comment"
                        },
                        {
                            "include": "#file_info"
                        }
                    ]
                },
                {
                    "begin": "^\\s*(attach)\\s*\\(",
                    "end": "\\)",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#expression"
                        },
                        {
                            "include": "#comment"
                        }
                    ]
                },
                {
                    "begin": "^\\s*(define)\\s+",
                    "end": "$",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#expression"
                        },
                        {
                            "include": "#comment"
                        },
                        {
                            "include": "#file_info"
                        }
                    ]
                },
                {
                    "comment": "Legacy connect syntax: foo <= bar",
                    "begin": "^\\s*",
                    "end": "$",
                    "patterns": [
                        {
                            "match": "(<=)",
                            "name": "keyword.operator.legacy.firrtl"
                        },
                        {
                            "include": "#expression"
                        },
                        {
                            "include": "#comment"
                        },
                        {
                            "include": "#file_info"
                        }
                    ]
                },
                {
                    "comment": "Legacy partial connect syntax: foo <- bar",
                    "begin": "^\\s*",
                    "end": "$",
                    "patterns": [
                        {
                            "match": "(<-)",
                            "name": "keyword.operator.legacy.firrtl"
                        },
                        {
                            "include": "#expression"
                        },
                        {
                            "include": "#comment"
                        },
                        {
                            "include": "#file_info"
                        }
                    ]
                },
                {
                    "comment": "Legacy invalidate syntax: foo is invalid",
                    "match": "^\\s*(.+?)\\s+(is)\\s+(invalid)\\b",
                    "captures": {
                        "1": {
                            "patterns": [
                                {
                                    "include": "#expression"
                                }
                            ]
                        },
                        "2": {
                            "name": "keyword.operator.legacy.firrtl"
                        },
                        "3": {
                            "name": "keyword.operator.legacy.firrtl"
                        }
                    }
                }
            ]
        },
        "statement_skip": {
            "match": "^\\s*(skip)\\b",
            "captures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            }
        },
        "statement_printf": {
            "begin": "^\\s*(printf)\\s*\\(",
            "end": "\\)(?:\\s*:\\s*(\\w+|`[\\w]+`))?",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "endCaptures": {
                "1": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#format_string"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_fprintf": {
            "begin": "^\\s*(fprintf)\\s*\\(",
            "end": "\\)(?:\\s*:\\s*(\\w+|`[\\w]+`))?",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "endCaptures": {
                "1": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#format_string"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_fflush": {
            "begin": "^\\s*(fflush)\\s*\\(",
            "end": "\\)(?:\\s*:\\s*(\\w+|`[\\w]+`))?",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "endCaptures": {
                "1": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#format_string"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_verification": {
            "begin": "^\\s*(assert|assume|cover)\\s*\\(",
            "end": "\\)(?:\\s*:\\s*(\\w+|`[\\w]+`))?",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "endCaptures": {
                "1": {
                    "name": "entity.name.type.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#format_string"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_stop": {
            "begin": "^\\s*(stop)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_force": {
            "begin": "^\\s*(force|force_initial|release|release_initial)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_layerblock": {
            "match": "^\\s*(layerblock)\\s+([\\w.]+|`[\\w]+`)\\s*:",
            "captures": {
                "1": {
                    "name": "keyword.declaration.firrtl"
                },
                "2": {
                    "name": "entity.name.class.firrtl"
                }
            }
        },
        "statement_intrinsic": {
            "begin": "^\\s*intrinsic\\s*\\(",
            "end": "\\)",
            "name": "meta.intrinsic.firrtl",
            "patterns": [
                {
                    "include": "#intrinsic_spec"
                },
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "statement_memory_config": {
            "patterns": [
                {
                    "begin": "^\\s*(data-type)\\s*=>",
                    "end": "$",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#type"
                        },
                        {
                            "include": "#comment"
                        }
                    ]
                },
                {
                    "match": "^\\s*(depth|reader|writer|readwriter|read-latency|write-latency)\\s*=>\\s*(\\w+|`[\\w]+`)",
                    "captures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        },
                        "2": {
                            "name": "constant.numeric.firrtl"
                        }
                    }
                },
                {
                    "match": "^\\s*(read-under-write)\\s*=>\\s*(old|new|undefined)",
                    "captures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        },
                        "2": {
                            "name": "keyword.other.firrtl"
                        }
                    }
                }
            ]
        },
        "statement_extmodule_config": {
            "patterns": [
                {
                    "match": "^\\s*(defname)\\s*=\\s*(\\w+|`[\\w]+`)",
                    "captures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        },
                        "2": {
                            "name": "entity.name.type.firrtl"
                        }
                    }
                },
                {
                    "begin": "^\\s*(parameter)\\s+(\\w+|`[\\w]+`)\\s*=",
                    "end": "$",
                    "beginCaptures": {
                        "1": {
                            "name": "keyword.other.firrtl"
                        },
                        "2": {
                            "name": "variable.parameter.firrtl"
                        }
                    },
                    "patterns": [
                        {
                            "include": "#format_string"
                        },
                        {
                            "match": "\\d+",
                            "name": "constant.numeric.firrtl"
                        },
                        {
                            "include": "#comment"
                        }
                    ]
                }
            ]
        },
        "expression": {
            "patterns": [
                {
                    "include": "#expression_mux"
                },
                {
                    "include": "#expression_enum"
                },
                {
                    "include": "#expression_intrinsic"
                },
                {
                    "include": "#expression_primop"
                },
                {
                    "include": "#expression_primop_deprecated"
                },
                {
                    "include": "#expression_probe"
                },
                {
                    "include": "#expression_literal"
                },
                {
                    "include": "#expression_radix_literal"
                },
                {
                    "include": "#expression_reference"
                }
            ]
        },
        "expression_reference": {
            "match": "\\b(\\w+|`[\\w]+`)\\b",
            "name": "variable.other.firrtl"
        },
        "expression_literal": {
            "match": "\\b([US]Int|Analog)(?:<(\\d+)>)?\\s*\\(\\s*([+-]?\\d+)\\s*\\)",
            "captures": {
                "1": {
                    "name": "storage.type.firrtl"
                },
                "2": {
                    "name": "constant.numeric.firrtl"
                },
                "3": {
                    "name": "constant.numeric.firrtl"
                }
            }
        },
        "expression_radix_literal": {
            "match": "\\b([US]Int|Analog)(?:<(\\d+)>)?\\s*\\(\\s*([+-]?0[bodh][0-9a-fA-F_]+)\\s*\\)",
            "captures": {
                "1": {
                    "name": "storage.type.firrtl"
                },
                "2": {
                    "name": "constant.numeric.firrtl"
                },
                "3": {
                    "name": "constant.numeric.firrtl"
                }
            }
        },
        "expression_enum": {
            "begin": "\\{\\|",
            "end": "\\|\\}\\s*\\(\\s*(\\w+|`[\\w]+`)(?:\\s*,\\s*)?",
            "endCaptures": {
                "1": {
                    "name": "variable.other.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#type_enum_variant"
                },
                {
                    "include": "#type"
                }
            ]
        },
        "expression_mux": {
            "begin": "\\b(mux)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.operator.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "expression_probe": {
            "begin": "\\b(probe|rwprobe|read)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.operator.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "expression_primop": {
            "begin": "\\b(add|sub|mul|div|rem|lt|leq|gt|geq|eq|neq|pad|asAsyncReset|asReset|asUInt|asSInt|asClock|shl|shr|dshl|dshr|cvt|neg|not|and|or|xor|andr|orr|xorr|cat|bits|head|tail)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.operator.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "match": "\\d+",
                    "name": "constant.numeric.firrtl"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "expression_primop_deprecated": {
            "begin": "\\b(asFixedPoint|bpshl|bpshr|bpset|validif)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "invalid.deprecated.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "expression_intrinsic": {
            "begin": "\\b(intrinsic)\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.other.firrtl"
                }
            },
            "patterns": [
                {
                    "include": "#intrinsic_spec"
                },
                {
                    "include": "#expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "intrinsic_spec": {
            "begin": "(\\w+)\\s*(?:<([^>]+)>)?(?:\\s*:\\s*)?",
            "end": "(?=,|\\))",
            "beginCaptures": {
                "1": {
                    "name": "entity.name.function.firrtl"
                },
                "2": {
                    "patterns": [
                        {
                            "match": "(\\w+)\\s*=\\s*(\\d+|\"[^\"]*\")",
                            "captures": {
                                "1": {
                                    "name": "variable.parameter.firrtl"
                                },
                                "2": {
                                    "name": "constant.other.firrtl"
                                }
                            }
                        }
                    ]
                }
            },
            "patterns": [
                {
                    "include": "#type"
                }
            ]
        },
        "property_expression": {
            "patterns": [
                {
                    "include": "#property_literal"
                },
                {
                    "include": "#property_primop"
                },
                {
                    "include": "#expression_reference"
                }
            ]
        },
        "property_literal": {
            "match": "\\b(Integer)\\s*\\(\\s*([+-]?\\d+)\\s*\\)",
            "captures": {
                "1": {
                    "name": "storage.type.firrtl"
                },
                "2": {
                    "name": "constant.numeric.firrtl"
                }
            }
        },
        "property_primop": {
            "begin": "\\b(integer_add|integer_mul|integer_shl|integer_shr|list_concat|List)\\s*(?:<([^>]+)>)?\\s*\\(",
            "end": "\\)",
            "beginCaptures": {
                "1": {
                    "name": "keyword.operator.firrtl"
                },
                "2": {
                    "patterns": [
                        {
                            "include": "#type_property"
                        }
                    ]
                }
            },
            "patterns": [
                {
                    "include": "#property_expression"
                },
                {
                    "include": "#comment"
                }
            ]
        },
        "format_string": {
            "patterns": [
                {
                    "begin": "\"",
                    "end": "\"",
                    "name": "string.quoted.double.firrtl",
                    "patterns": [
                        {
                            "match": "%[bdx%]",
                            "name": "constant.character.escape.firrtl"
                        },
                        {
                            "match": "\\\\[nt\\\\\"']",
                            "name": "constant.character.escape.firrtl"
                        }
                    ]
                },
                {
                    "begin": "'",
                    "end": "'",
                    "name": "string.quoted.single.firrtl",
                    "patterns": [
                        {
                            "match": "\\\\[nt\\\\\"']",
                            "name": "constant.character.escape.firrtl"
                        }
                    ]
                }
            ]
        },
        "comment": {
            "match": ";.*$",
            "name": "comment.line.character.firrtl"
        },
        "file_info": {
            "match": "@\\[[^\\]]+\\]",
            "name": "comment.line.character.firrtl"
        }
    }
}
